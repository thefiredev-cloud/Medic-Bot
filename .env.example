# =============================================================================
# LA County Fire Medic Bot - Environment Configuration
# =============================================================================
# Copy this file to .env.local for development
# For production: Set these variables in Netlify Environment Variables
# =============================================================================

# =============================================================================
# LLM Configuration (Required)
# =============================================================================
# OpenAI API key for GPT-4o-mini
# Get your key from: https://platform.openai.com/api-keys
LLM_API_KEY=your_openai_api_key_here

# LLM API base URL (default: OpenAI)
LLM_BASE_URL=https://api.openai.com/v1

# LLM model to use (gpt-4o-mini recommended for cost/performance)
LLM_MODEL=gpt-4o-mini

# =============================================================================
# Knowledge Base Configuration
# =============================================================================
# Knowledge base scope (pcm = LA County Prehospital Care Manual)
KB_SCOPE=pcm

# Knowledge base source (clean = validated clinical content)
KB_SOURCE=clean

# Optional: Custom KB file path (defaults to data/ems_kb_clean.json)
# KB_PATH=/path/to/custom/kb.json

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
# Chat endpoint rate limit (requests per minute per IP)
RATE_LIMIT_CHAT_RPM=20

# API endpoint rate limit (requests per minute per IP)
RATE_LIMIT_API_RPM=60

# =============================================================================
# Admin Access Control
# =============================================================================
# Comma-separated list of IP addresses allowed to access admin endpoints
# Example: ADMIN_IP_ALLOWLIST=127.0.0.1,::1,192.168.1.100
ADMIN_IP_ALLOWLIST=127.0.0.1,::1

# =============================================================================
# Audit Endpoint Protection
# =============================================================================
# Access token for audit log endpoints (generate a strong random token)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
AUDIT_ACCESS_TOKEN=generate_strong_random_token_here

# =============================================================================
# Feature Flags
# =============================================================================
# Enable audit logging (true/false)
ENABLE_AUDIT_LOGGING=true

# Enable analytics tracking (true/false)
ENABLE_ANALYTICS=false

# =============================================================================
# Application Settings
# =============================================================================
# Node environment (development, production, test)
NODE_ENV=development

# Application URL (used for CORS, redirects, etc.)
# For development: http://localhost:3000
# For production: https://your-domain.netlify.app
APP_URL=http://localhost:3000

# =============================================================================
# Database Configuration (Supabase PostgreSQL)
# =============================================================================
# Supabase project URL
# Get from: https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co

# Supabase anonymous key (public, safe for client-side)
# Get from: https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Supabase service role key (SECRET - server-side only!)
# Get from: https://app.supabase.com/project/_/settings/api
# WARNING: This key bypasses Row Level Security. Never expose to client!
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Enable database audit logging (dual-write: file + database)
# Set to 'true' to write audit logs to PostgreSQL
ENABLE_DB_AUDIT=false

# Database connection pool configuration (optional)
# DB_POOL_MIN=2
# DB_POOL_MAX=10

# =============================================================================
# Future: External Integrations (Phase 2+)
# =============================================================================
# LA County FireCAD integration
# FIRECAD_API_URL=
# FIRECAD_API_KEY=

# ESO Solutions integration (ePCR)
# ESO_API_URL=
# ESO_API_KEY=

# =============================================================================
# Future: Monitoring & Error Tracking (Phase 2)
# =============================================================================
# Sentry error tracking DSN
# SENTRY_DSN=

# =============================================================================
# Development Settings
# =============================================================================
# Enable debug logging in development
DEBUG=false

# Disable Husky git hooks in CI/CD environments
HUSKY=0
